{"sid":"56d25d21-be27-4000-8091-061b8be03db2","name":"双辞动漫","info":"高清动漫","baseUrl":"https://www.nyafun.net/","engine":23,"type":2,"imgMode":2,"http2":true,"grade":2,"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36","version":"1.0.5","author":{"name":"静静","info":"我是静静"},"script":{"requires":[{"lib":"cheerio","version":0}],"code":"ZnVuY3Rpb24gaG9tZV9wYXJzZSh1cmwsIGh0bWwsIGhlYWRlcnMpIHsKICAgIHZhciBsaXN0ID0gW107CiAgICBsZXQgJCA9IGNoZWVyaW8ubG9hZChodG1sKTsKICAgICQoJy5tb2R1bGUtbWFpbiA+IC5tb2R1bGUtcG9zdGVyLWl0ZW1zJykuY2hpbGRyZW4oJ2EnKS5lYWNoKGZ1bmN0aW9uIChpLCBlKSB7CiAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpOwogICAgICAgIGxpc3QucHVzaCh7CiAgICAgICAgICAgIHRpdGxlOiBzZWxmLmF0dHIoJ3RpdGxlJyksCiAgICAgICAgICAgIGxpbms6IHNlbGYuYXR0cignaHJlZicpLAogICAgICAgICAgICBjb3Zlcjogc2VsZi5maW5kKCdpbWcnKS5maXJzdCgpLmF0dHIoJ2RhdGEtb3JpZ2luYWwnKSwKICAgICAgICAgICAgaW5mbzogc2VsZi5maW5kKCcubW9kdWxlLWl0ZW0tZG91YmFuJykudGV4dCgpCiAgICAgICAgfSk7CiAgICB9KTsKICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShsaXN0KTsKfQoKZnVuY3Rpb24gc2VhcmNoX3BhcnNlKHVybCwgaHRtbCwgaGVhZGVycykgewogICAgdmFyIGxpc3QgPSBbXTsKICAgIGxldCAkID0gY2hlZXJpby5sb2FkKGh0bWwpOwogICAgJCgnLm1vZHVsZS1jYXJkLWl0ZW0nKS5lYWNoKGZ1bmN0aW9uIChpLCBlKSB7CiAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpOwogICAgICAgIGxpc3QucHVzaCh7CiAgICAgICAgICAgIHRpdGxlOiBzZWxmLmZpbmQoJ2ltZycpLmZpcnN0KCkuYXR0cignYWx0JyksCiAgICAgICAgICAgIGxpbms6IHNlbGYuY2hpbGRyZW4oJ2EnKS5maXJzdCgpLmF0dHIoJ2hyZWYnKSwKICAgICAgICAgICAgY292ZXI6IHNlbGYuZmluZCgnaW1nJykuZmlyc3QoKS5hdHRyKCdkYXRhLW9yaWdpbmFsJyksCiAgICAgICAgICAgIGluZm86IHNlbGYuZmluZCgnLm1vZHVsZS1pdGVtLW5vdGUnKS5maXJzdCgpLnRleHQoKQogICAgICAgIH0pOwogICAgfSk7CiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobGlzdCk7Cn0KCgpmdW5jdGlvbiBib29rX3BhcnNlKHVybCwgaHRtbCwgaGVhZGVycykgewogICAgdmFyICQgPSBjaGVlcmlvLmxvYWQoaHRtbCk7CiAgICB2YXIgYm9vayA9IHsKICAgICAgICBjb21tZW50czogW10sCiAgICAgICAgaW5mbzogJCgnLmNvbC5tYi0yJykudGV4dCgpLnRyaW0oKSwKICAgICAgICB1cGRhdGVUaW1lOiAkKCcubXQtMSA+IC5iYWRnZScpLmZpcnN0KCkudGV4dCgpCiAgICB9OwogICAgdmFyIG1hcCA9IG5ldyBNYXAoKTsKCiAgICAkKCcubW9kdWxlLXRhYi1pdGVtJykuZWFjaChmdW5jdGlvbiAoaSwgZSkgewogICAgICAgIHZhciBzZWN0aW9ucyA9IFtdOwogICAgICAgICQoJy5tb2R1bGUtcGxheS1saXN0LWNvbnRlbnQnKS5lcShpKS5jaGlsZHJlbignYScpLmVhY2goZnVuY3Rpb24gKGksIGUpIHsKICAgICAgICAgICAgc2VjdGlvbnMucHVzaCh7CiAgICAgICAgICAgICAgICB0aXRsZTogJCh0aGlzKS50ZXh0KCksCiAgICAgICAgICAgICAgICBsaW5rOiAkKHRoaXMpLmF0dHIoJ2hyZWYnKSwKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgbWFwWyQodGhpcykuY2hpbGRyZW4oJ3NwYW4nKS50ZXh0KCldID0gc2VjdGlvbnM7CiAgICB9KTsKCiAgICBib29rLnNlY3Rpb25zID0gbWFwOwoKICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShib29rKTsKfQpmdW5jdGlvbiBjb250ZW50X3BhcnNlKHVybCwgaHRtbCwgaGVhZGVycykgewogICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKGh0bWwpOwogICAgaWYgKGRhdGEucmVzb3VyY2UgPT0gbnVsbCB8fCBkYXRhLnJlc291cmNlLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgcmV0dXJuICJFUlJPUjrmsqHmnInll4XmjqLliLDotYTmupAiOwogICAgfQogICAgdmFyIGxpbmsgPSBkYXRhLnJlc291cmNlWzBdLmxpbms7CiAgICBsZXQgc3RhcnQgPSBsaW5rLmluZGV4T2YoJ3VybD0nKTsKICAgIGxldCBlbmQgPSBsaW5rLmluZGV4T2YoJyZuZXh0PScpOwogICAgaWYgKHN0YXJ0ICE9IC0xICYmIGVuZCAhPSAtMSkgewogICAgICAgIGxpbmsgPSBsaW5rLnN1YnN0cmluZyhzdGFydCArIDQsIGVuZCk7CiAgICB9CiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoewogICAgICAgIG1pbWU6ICJ2aWRlby8qIiwKICAgICAgICBsaW5rOiBsaW5rLnJlcGxhY2UoJ2h0dHBzOi8vcGxheS5ueWFmdW4ubmV0Lz91cmw9JywnJykKICAgIH0pOwp9"},"home":{"title":"今日更新","url":"/label/new.html","method":"GET","parse":"home_parse","cacheAge":"1h"},"search":{"title":"搜索","url":"/search/wd/@key/page/@page.html","parse":"search_parse"},"book":{"title":"详情","parse":"book_parse"},"details":{"title":"嗅探","parse":"content_parse","sniff":true,"sniffFilters":"^[a-zA-z]+://[^\\s]((?!url=).)+(\\.m3u8|\\.mp4)"}}