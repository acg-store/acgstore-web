{
    "sid": "0fe81f09-b3ce-4047-b198-d975fc9d575d",
    "name": "片马影院",
    "logo": "https://s1.ax1x.com/2023/01/06/pSEk98f.png",
    "info": "网友推荐，免嗅探",
    "baseUrl": "https://www.pianmas.com",
    "expr": "pianmas\\.com",
    "type": 2,
    "grade": 7,
    "needProxy": 0,
    "encode": "utf-8",
    "style": 1,
    "version": "1.0.2",
    "openSource": true,
    "imgMode": 3,
    "engine": 25,
    "author": {
        "name": "静静",
        "info": "请打开源网页，支持片马影院"
    },
    "script": {
        "requires": [
            {
                "lib": "cheerio"
            }
        ],
        "code": "ZnVuY3Rpb24gaG9tZV9wYXJzZSh1cmwsIGh0bWwsIGhlYWRlcnMpIHsKICAgIHZhciBsaXN0ID0gW107CiAgICBsZXQgJCA9IGNoZWVyaW8ubG9hZChodG1sKTsKICAgICQoJy5zdHVpLXZvZGxpc3QnKS5jaGlsZHJlbignbGknKS5lYWNoKGZ1bmN0aW9uIChpLCBlKSB7CiAgICAgICAgdmFyIHNlbGYgPSAkKHRoaXMpOwogICAgICAgIGxpc3QucHVzaCh7CiAgICAgICAgICAgIHRpdGxlOiBzZWxmLmZpbmQoJ2EnKS5maXJzdCgpLmF0dHIoJ3RpdGxlJyksCiAgICAgICAgICAgIGxpbms6IHNlbGYuZmluZCgnYScpLmZpcnN0KCkuYXR0cignaHJlZicpLAogICAgICAgICAgICBjb3Zlcjogc2VsZi5maW5kKCdhJykuZmlyc3QoKS5hdHRyKCdkYXRhLW9yaWdpbmFsJyksCiAgICAgICAgICAgIGluZm86IHNlbGYuZmluZCgnLnBpYy10ZXh0JykudGV4dCgpLAogICAgICAgIH0pOwogICAgfSk7CiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobGlzdCk7Cn0KCmZ1bmN0aW9uIHNlYXJjaF9wYXJzZSh1cmwsIGh0bWwsIGhlYWRlcnMpIHsKICAgIHZhciBsaXN0ID0gW107CiAgICBsZXQgJCA9IGNoZWVyaW8ubG9hZChodG1sKTsKICAgICQoJy5yb3cucm93LWNhcmRzJykuY2hpbGRyZW4oJ2RpdicpLmVhY2goZnVuY3Rpb24gKGksIGUpIHsKICAgICAgICB2YXIgc2VsZiA9ICQodGhpcyk7CiAgICAgICAgbGlzdC5wdXNoKHsKICAgICAgICAgICAgdGl0bGU6IHNlbGYuZmluZCgnYS5hbGVydC10aXRsZScpLmZpcnN0KCkuYXR0cigndGl0bGUnKSwKICAgICAgICAgICAgbGluazogc2VsZi5maW5kKCdhJykuZmlyc3QoKS5hdHRyKCdocmVmJyksCiAgICAgICAgICAgIGNvdmVyOiBzZWxmLmZpbmQoJ2ltZycpLmZpcnN0KCkuYXR0cignc3JjJyksCiAgICAgICAgICAgIGluZm86IHNlbGYuZmluZCgnLnRleHQtdHJ1bmNhdGUtc20nKS5sYXN0KCkudGV4dCgpCiAgICAgICAgfSk7CiAgICB9KTsKICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShsaXN0KTsKfQoKCmZ1bmN0aW9uIGJvb2tfcGFyc2UodXJsLCBodG1sLCBoZWFkZXJzKSB7CiAgICB2YXIgJCA9IGNoZWVyaW8ubG9hZChodG1sKTsKICAgIHZhciBib29rID0gewogICAgICAgIGluZm86ICQoJy5kZXRhaWwtY29udGVudCcpLnRleHQoKS50cmltKCksCiAgICAgICAgdXBkYXRlVGltZTogJCgnZGl2LnN0dWktY29udGVudF9fZGV0YWlsID4gcDpudGgtY2hpbGQoOCknKS50ZXh0KCkKICAgIH07CiAgICB2YXIgbWFwID0gbmV3IE1hcCgpOwogICAgJCgnLnN0dWktdm9kbGlzdF9faGVhZCcpLmVhY2goZnVuY3Rpb24gKGksIGUpIHsKICAgICAgICBsZXQgZ3JvdXAgPSAkKHRoaXMpLmNoaWxkcmVuKCcucHVsbC1yaWdodDEnKS50ZXh0KCk7CiAgICAgICAgaWYgKGdyb3VwKSB7CiAgICAgICAgICAgIHZhciBzZWN0aW9ucyA9IFtdOwogICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2xpJykuZWFjaChmdW5jdGlvbiAoaSwgZSkgewogICAgICAgICAgICAgICAgc2VjdGlvbnMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICQodGhpcykuY2hpbGRyZW4oJ2EnKS50ZXh0KCksCiAgICAgICAgICAgICAgICAgICAgbGluazogJCh0aGlzKS5jaGlsZHJlbignYScpLmF0dHIoJ2hyZWYnKSwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbWFwW2dyb3VwXSA9IHNlY3Rpb25zOwogICAgICAgIH0KICAgIH0pOwogICAgYm9vay5zZWN0aW9ucyA9IG1hcDsKICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShib29rKTsKfQoKZnVuY3Rpb24gZGV0YWlsc19wYXJzZSh1cmwsIGh0bWwsIGhlYWRlcnMpIHsKICAgIHZhciAkID0gY2hlZXJpby5sb2FkKGh0bWwpOwogICAgdmFyIHNjcmlwdCA9ICQoJ3NjcmlwdCcpLmZpbHRlcihmdW5jdGlvbiAoaSwgZSkgewogICAgICAgIHJldHVybiAkKGUpLnRleHQoKS50cmltKCkuc3RhcnRzV2l0aCgndmFyIHBsYXllcl8nKTsKICAgIH0pOwogICAgbGV0IGNvZGUgPSBzY3JpcHQudGV4dCgpOwogICAgZXZhbChjb2RlKTsKICAgIGxldCBwbGF5ZXJfZGF0YSA9IHBsYXllcl9hYWFhOwogICAgaWYgKCFwbGF5ZXJfZGF0YSkgewogICAgICAgIHJldHVybiAiRVJST1I66I635Y+W6LWE5rqQ5aSx6LSlIjsKICAgIH0KICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7IG1pbWU6ICJ2aWRlby8qIiwgbGluazogcGxheWVyX2RhdGEudXJsIH0pOwp9"
    },
    "home": {
        "title": "今日更新",
        "url": "/sort/all-@page.html",
        "method": "GET",
        "parse": "home_parse",
        "cacheAge": "1h",
        "addPage": 1,
        "startPage": 1
    },
    "search": {
        "title": "搜索",
        "url": "/so/@key----------@page---.html",
        "method": "GET",
        "parse": "home_parse",
        "cacheAge": "1h",
        "addPage": 1,
        "startPage": 1
    },
    "book": {
        "title": "详情",
        "method": "GET",
        "parse": "book_parse",
        "cacheAge": "1h"
    },
    "details": {
        "title": "内容",
        "method": "GET",
        "parse": "details_parse",
        "cacheAge": "1h"
    }
}